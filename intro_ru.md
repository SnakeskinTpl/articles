Язык описания шаблонов Snakeskin
================================

Всем привет! Хочу рассказать о своей разработке, а именно языке описания шаблонов для использования с JS — Snakeskin.
Проекту уже скоро 2 года, и мне кажется, что все детские болезни он пережил, поэтому я могу поделиться результатом с сообществом.

Но для начала расскажу немного о себе: я занимаюсь JS разработкой уже 8-й год и за это время успел много где поработать над разными проектами, в том числе в Яндексе, а сейчас тружусь над своим стартапом в рамках которого и был создан Snakeskin.

Если постараться дать точное определение, то Snakeskin является языком описания шаблонов, который транслируется в JS,
а по идеологии он имеет много общего с [Google Closure Templates] (https: //developers.google.com/closure/templates/)  (SOY)  или [fest] (https: //github.com/mailru/fest)  от mail.ru,  т.е. исходные шаблоны преобразовываются в одноимённые JS функции и в JS мы уже оперируем с ними. Однако Snakeskin также позволяет сразу генерировать результат работы шаблона,  т.е. вариантов использование несколько:

* Предварительная «компиляция» шаблонов в JS и последующее самостоятельное использование полученных функций на клиенте или сервере (node.js);
* live-компиляция шаблонов:  т.е. трансляция и немедленное выполнение непосредственно на клиенте или сервере;
* Генерация статических страниц.

На данный момент существует вагон и маленькая тележка различных шаблонных движков, так почему же я решил придумывать ещё один? Главная причина — code reuse. Дело в том, что для моего основного проекта была нужна такая система шаблонов,
которая бы могла максимально удобно и гибко уметь использовать и модифицировать уже написанный код шаблонов,
а также мне хотелось реализовать пласт дополнительных фич, итак, Snakeskin:

* 2 варианта синтаксиса: классический и Jade-Like;
* ОО-подход с очень богатым выбором для code-reuse (наследование, композиция, примеси и т.д.);
* Близкий к JS набор директив;
* Поддержка БЭМ на уровне синтаксиса;
* Поддержка локализации на уровне синтаксиса;
* Поддержка макросов и фильтров;
* Поддержка модулей и разбиения на файлы;
* Высокая скорость трансляции;
* Работа в браузерах (IE6+), а также на сервере (Node.js);
* Движок написан на чистом JavaScript и не имеет дополнительных зависимостей;
* Исходный код спроектирован для совместной работы с Google Closure Compiler в продвинутом режиме;
* Хорошее покрытие кода тестами;
* Подробная документация с примерами.

Если вас это заинтриговало, то добро пожаловать под кат.

## Общая философия Snakeskin

Шаблон Snakeskin — это функция JavaScript,  т.е. грубо говоря

```
{template hello (name)  }
    Hello {name}!
{/template}
```

эквивалентно

```js
function hello (name)  {
    return 'Hello ' + name + '!';
}
```

Общая схема работы такая:

1. Мы пишем шаблон и сохраняем в его в файле с расширением `.ss`;
2. Далее мы транслируем его с помощью Snakeskin в `.js`;
3. После подключаем полученным файл и используем функции, в которые были транслированы шаблоны.

## 2 варианта синтаксиса